<!DOCTYPE html>
<head>
	<style>
		body{
			font-size: 14px;
			font-family: Helvetica, Arial, sans-serif;
		}

		.example
		{		
			margin-left: 60px;
			padding-left: 10px;
			padding-right: 10px;
			display: inline-block;
			line-height: 8px;
			white-space: nowrap;
			overflow: auto;
		}

		.keyword
		{
			padding: 3px;
		}

		.content_block
		{
			margin: 0 0 8px 30px;
			padding: 6px;
			border: 1px solid rgb(200,200,200);
		}

		.content_block_caption
		{
			font-weight: bold;
			font-size: 20px;
			padding-bottom: 3px;
			border-bottom: 1px dashed black;
		}

		.button_hide
		{
			display: inline-block;
			border-radius: 50%;
			border: 1px solid black;
			margin-right: 15px;
			line-height: 15px;
			width: 20px;
			height: 20px;
			text-align: center;
			cursor: pointer;

			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
			font-size: 24px;

			position: relative;
			vertical-align: sub;
		}

		.button_hide_inner{
			width: 100%;
			height: 100%;
			background-repeat: no-repeat;
			background-position: center center;
			background-size: 60%;
			position: absolute;
			top: 0;
			left: 0;

			transition-property: opacity, transform;
			transition-duration: 0.1s;
			transition-timing-function: linear;
		}

		.button_hide_minus{
			background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QQYFiYTLiqmDwAAAFVpVFh0Q29tbWVudAAAAAAAQ29weXJpZ2h0IElOQ09SUyBHbWJIICh3d3cuaWNvbmV4cGVyaWVuY2UuY29tKSAtIFVubGljZW5zZWQgcHJldmlldyBpbWFnZViuimEAAACXSURBVDjLzVNBDsMwCDP2PtP/vyZ/KbATGVE3rWo1aZycQCKDje37DklwdwAASZgZMhMRAUkTV65qJYGSUCEJEQEA83HHlataAGD9djX4MUEubbk7yGO5ZeZvGJyNh7tj27ZLNMYYdotBRKwyXprBHRlJ/oEKdPdpmI7r3O+LbWa+TNZ9/Q2/25Olhb6VncHpGZxVpO/JE4UlbN5XQa6iAAAAAElFTkSuQmCC");
		}

		.button_hide_plus{
			opacity: 0;
			background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QQYFiU53rw8GgAAAFVpVFh0Q29tbWVudAAAAAAAQ29weXJpZ2h0IElOQ09SUyBHbWJIICh3d3cuaWNvbmV4cGVyaWVuY2UuY29tKSAtIFVubGljZW5zZWQgcHJldmlldyBpbWFnZViuimEAAACtSURBVDjLpVNdDoYgDOtWz4Lx/qfRs7Dte5ofwZ+o9AWSFdJCK7VWkISZAQBUFSKCiIC7g+S+z1lySWIiiUReRBLzPAcabNsmOUsuAGje9hX6lGhmUD3Sp15Sa6lFb/W1gitIrRXLssSXw+u6ypACd4deeX78CyPfqKqQiHP7pZRDkIZycGshbbT7syCl2oj4d+cuJH2Q3H1//b0LPento0rWOWW2KrJ9/dpW/Qf6R28tOxvu8wAAAABJRU5ErkJggg==");
		}

		.button_hide_small{
			width: 15px;
			height: 15px;
			float: left;
			margin-top: 4px;
		}

		.tab{
			margin-left: 2em;
		}

		.tab2{
			margin-left: 4em;
		}

		.tab3{
			margin-left: 6em;
		}

		ul{
			line-height: 1.5em;
		}

		p{
			line-height: 1.5em;
		}
	</style>

	<style> /* dark theme */
		body{
			background-color: gray;
		}

		.button_hide{
			background-color: rgb(0,120,180);
		}

		.content_block_caption{
			color: #004477;
		}

		.keyword{
			background-color: #BBBBBB;
		}

		.example{
			background-color: #7777dd;
		}

		.comment{
			color: rgb(0,120,0);
		}
	</style>

	<style> /* light theme */
		body{
			background-color: white;
		}

		.button_hide{
			background-color: lightblue;
		}

		.content_block_caption{
			color: cornflowerblue;
		}

		.keyword{
			background-color: #dddddd;
		}

		.example{
			background-color: #bbbbff;
		}

		.comment{
			color: rgb(0,170,0);
		}
	</style>

	<script>
		var forceHide = false;

		function toggleHide(ID)
		{
			var bElem = document.getElementById(ID + "_button");
			var cElem = document.getElementById(ID + "_content");

			if(cElem.style.display == "none" && !forceHide) //unhide
			{
				cElem.style.display = "";

				bElem.firstChild.style.opacity = "0";
				bElem.firstChild.style.transform = "";
				
				bElem.childNodes[1].style.opacity = "1";
				bElem.childNodes[1].style.transform = "";
			}
			else{ //hide
				cElem.style.display = "none";

				bElem.firstChild.style.opacity = "1";
				bElem.firstChild.style.transform = "rotate(90deg)";

				bElem.childNodes[1].style.opacity = "0";
				bElem.childNodes[1].style.transform = "rotate(90deg)";
			}
		}

		function minimizeAll()
		{
			forceHide = true;
			var btns = document.getElementsByClassName("button_hide");
			for(var i = 0; i < btns.length; i++){
				btns[i].onclick();
			}
			forceHide = false;
		}

		var curTheme = 1;
		var themeNames = [
			"",
			"Dark",
			"Light"
		];
		function switchTheme()
		{
			document.styleSheets[curTheme].disabled = true;

			curTheme++;
			if(curTheme >= document.styleSheets.length){
				curTheme = 1;
			}

			document.styleSheets[curTheme].disabled = false;

			var nextTheme = curTheme + 1;
			if(nextTheme >= document.styleSheets.length){
				nextTheme = 1;
			}
			document.getElementById("btnThemeSwitch").innerHTML = themeNames[nextTheme];
		}
		for(var i = 2; i < document.styleSheets.length; i++){
			document.styleSheets[i].disabled = true;
		}
	</script>
</head>

<body id="bd">
	<div style="font-size: 11px">version from 26.04.2017, written by <span onclick="var a=document.getElementById('bd');a.style.transition='filter 60s linear';a.style.filter='blur(2px)';">AgentSmith</span></div>
	<div style="right: 5px; top: 5px; position: absolute;">
		<button id="btnThemeSwitch" onclick="switchTheme()">Light</button>
		<button onclick="minimizeAll()">Minimize all</button>
	</div>

	<h1 id="ee" style="color: #5e9ca0; text-align: center; transition: transform 4s;" onclick='var a=document.getElementById("ee");if(a.style.transform != ""){a.style.transform=""}else{a.style.transform="rotate(4320deg)"}'><span style="color: #003366;">How to use WSE/LUA</span></h1>

	<p>&nbsp;</p>
	<p>&nbsp;</p>
	<p>WSE/LUA uses a modified version of LuaJIT 2.0.4, which is based on and ABI compatible to Lua 5.1</p>
	<p>&nbsp;</p>
	<h2><div id="setup_button" class="button_hide" onclick="toggleHide('setup')">&nbsp;</div><span style="color: #003366;">BASIC SETUP</span></h2>
	<hr/>
	<div id="setup_content">
		<ul>
			<li>Create "[warband_dir]\Modules\[module_name]\lua\", [module_name] should be e.g. Native</li>
			<li>Create main.lua inside it. This file, if it exists, gets loaded and executed by WSE at startup, before any of the module system code.</li>
			<p></p>
			<li>Create "[warband_dir]\Modules\[module_name]\lua\msfiles\" (msfiles - "Module System files")</li>
			<li>Copy header_operations.py to your msfiles folder. This is so that WSE can translate operation names to opcodes and is neccessary for calling module system operations from lua.</li>
		</ul>
		<h2>&nbsp;</h2>
	</div>


	<h2><div id="game_table_button" class="button_hide" onclick="toggleHide('game_table')">&nbsp;</div><span style="color: #003366;">THE "GAME" TABLE<br /></span></h2>
	<hr/>
	<div id="game_table_content">
		<p style="margin-left: 20px;"><em>The game table is a predefined global table that allows you access to the game from lua.</em></p>
		<div class="content_block">
			<div class="content_block_caption">Operations</div>
			<div>
				<p>To call operations, use <span class="keyword">game.operation_name(arg1, arg2, ...)</span></p>
				<p style="padding-left: 30px;">Example: <span style="margin-left:0px; line-height: 25px; display:inline; padding: 6px;" class="example">game.display_message("test string")</span></p>
				<p>String and pos arguments are passed to the game via the games registers (overwritting them), starting from reg[128] and counting downwards.</p>
				<p>Notice that the argument type matters. For example, if an operation expects an integer, you cannot pass a string that contains a number.</p>
				<p>Return values are:</p>
				<div class="example">
					<div style="display: inline-block; margin-right: 5px;">
						<p>boolDidNotFail, intError</p>
						<p>intResult, intError</p>
						<p>boolDidNotFail, intResult, intError</p>
						<p>intError</p>
					</div>
					<div style="display: inline-block;">
						<p>=&nbsp;&nbsp;game.cf_operation(arg1, arg2, ...) for can_fail operations</p>
						<p>=&nbsp;&nbsp;game.lhs_operation(lhs_arg, arg1, arg2, ...) for lhs operations</p>
						<p>=&nbsp;&nbsp;game.cf_lhs_operation(lhs_arg, arg1, arg2, ...) for operations which are both can_fail and lhs</p>
						<p>=&nbsp;&nbsp;game.operation(arg1, arg2, ...) for all other operations</p>
					</div>
				</div>
				<p>While most Lhs operations don't require an actual value for lhs_arg (in those cases it's strictly a return variable, for example player_get_gold), some (for example val_add) do, so you have to specify it anyway.</p>
				<p>Real-world lhs_operation example:</p>
				<div class="example">
					<p>local gold = game.player_get_gold(0, playerId)</p>
				</div>
				<p>Note that in Lua, you don't have to assign all return values. For example, if you don't care about the error code, just omit the corresponding lhs var.</p>
				<p>I'm not sure what the error code signalizes, however it should be 0 if there was no error.</p>
			</div>
		</div>


		<div class="content_block">
			<div class="content_block_caption">Registers</div>
			<div>
				<p>To access registers, use <span class="keyword">game.reg[n]</span> , <span class="keyword">game.sreg[n]</span> and <span class="keyword">game.preg[n]</span></p>
				<p style="padding-left: 30px;">Example:</p>
				<div class="example">
					<p>game.reg[0] = 123</p>
					<p>local i = game.reg[0]</p>
					<p>game.sreg[0] = "test string"</p>
					<p>local s = game.sreg[0]</p>
					<p>game.preg[0] = game.pos.new()</p>
					<p>local pos = game.preg[0]</p>
				</div>
				<p>As of the current version, registers are copied by value instead of by reference. So doing things like:</p>
				<div class="example">
					<p>game.preg[0]:rotX(30)</p>
				</div>
				<p>Does not change the actual game register. This is likely going to be improved in a future version. What you have to do instead for now is:</p>
				<div class="example">
					<p>local p = game.preg[0]</p>
					<p>p:rotX(30)</p>
					<p>game.preg[0] = p</p>
				</div>
			</div>
		</div>

		<div class="content_block">
			<div class="content_block_caption">Constants</div>
			<div>
				<p>For every header_[name].py or ID_[name].py file you copied to your "msfiles" folder (except header_operations.py), a new table will be generated: <span class="keyword">game.const.[name]</span></p>
				<p>This table will be filled with all the constants from that file.</p>
				<p>As of the current version, only lines that match one of the two following regexes (regular expressions) will be accepted:</p>
				<div class="example">
					<p>^(\w+)=(((-)?0x[\da-fA-F]+)|((-)?\d+(\.\d+)?))$</p>
					<p>^(\w+)=(\w+)$</p>
				</div>
				<p>This probably looks intimidating to you, but really all it says is that your constant must either be a number, a hex number, or another constant (from the same file, currently).</p>
				<p>In other words: <span class="keyword">constant = num|hexNum|otherConstant</span>
				<p>If the match fails, the line will be ignored and a warning message will be triggered which you can safely ignore.</p>
				<p>You can omit the <span class="keyword">[name]</span> part in <span class="keyword">game.const.[name].[constant]</span>, in which case all tables in <span class="keyword">game.const</span> will be searched for your constant and the first result will be used.</p>
				<p>So let's say you want to add a deathmatch trigger for <span class="keyword">ti_on_agent_hit</span>. Instead of this:</p>
				<div class="example">
					<p>game.addTrigger("mst_multiplayer_dm", -28, 0, 0, condCB)</p>
				</div>
				<p>You could copy header_triggers.py to your msfiles folder and do:</p>
				<div class="example">
					<p>game.addTrigger("mst_multiplayer_dm", game.const.ti_on_agent_hit, 0, 0, condCB)</p>
					<p class="comment">--or if you like to be specific:</p>
					<p>game.addTrigger("mst_multiplayer_dm", game.const.triggers.ti_on_agent_hit, 0, 0, condCB)</p>
				</div>
			</div>
		</div>

		<div class="content_block">
			<div class="content_block_caption">Triggers</div>
			<div>
				<p>To add triggers, use <span class="keyword">game.addTrigger(strTemplateId, numCheckTime, numDelayTime, numRearmTime, funcConditionsCallback, [funcConsequencesCallback])</span></p>
				<p>These work exactly like module system triggers. Times can be float values or values from header_triggers.py (the numbers, string names are not supported yet), just like you would do it in the MS. The callbacks <strong>must</strong> return a boolean. If conditionsCallback returns false, consequencesCallback will not be executed.</p>
				<p>This function is fairly expensive, as it involves copying the entire array of triggers and then adding the new one.</p>
				<p style="padding-left: 30px;">Example:</p>
				<div class="example">
					<p>function condCB()</p>
					<p class="tab">doStuff()</p>
					<p class="tab">return true</p>
					<p>end</p>
					<p>game.addTrigger("mst_multiplayer_dm", 1, 0, 0, condCB)</p>
				</div>
				<p>addTrigger returns an integer that is the index of the added trigger.</p>
				<p>You can also remove triggers by using <span class="keyword">game.removeTrigger(strTemplateId, intTriggerIndex)</span>. If intTriggerIndex is negative, the trigger with (numTriggers + intTriggerIndex) gets removed (e.g. to remove the last trigger, use -1).</p>
			</div>
		</div>


		<div class="content_block">
			<div class="content_block_caption">Iterators</div>
			<div>
				<p>To use iterators (try_for_agents, try_for_players, ...), use the provided iterator functions <span class="keyword">game.partiesI, game.agentsI, game.propInstI, game.playersI</span></p>
				<p>These work exactly like module system iterators and take the same arguments.</p>
				<p style="padding-left: 30px;">Example:</p>
				<div class="example">
					<p>for curAgent in game.playersI(true) do <span class="comment">--skip server</span></p>
					<p class="tab">foo(curAgent)</p>
					<p>end</p>
				</div>
			</div>
		</div>

		<div class="content_block">
			<div class="content_block_caption">Positions</div>
			<div>
				<p>To work with positions, the following "classes" are provided: <span class="keyword">game.rotation, game.pos and vector3</span> (see under miscellaneous)</p>
				<p>Keep in mind that these don't need the fixed point multiplier that the module system requires you to use.</p>
				<p>The MS multiplier is essentially a way of specifying the current unit of length.</p>
				<p style="padding-left: 30px;">MS Example:</p>
				<div class="example">
					<p>set_fixed_point_multiplier(1),</p>
					<p>position_get_x(":x", 0), <span class="comment">#get pos0_x in meters</span></p>
					<p>set_fixed_point_multiplier(100),</p>
					<p>position_get_x(":x", 0), <span class="comment">#get pos0_x in centimeters</span></p>
				</div>
				<p>Consider the lua counterpart to "always have a fixed point multiplier of 1".</p>

				<ul>
					<li>
						<p><span class="keyword">game.rotation</span></p>
						<ul>
							<li>
								<p><span class="keyword">game.rotation.new([obj])</span> - constructor. obj can be used to specify initial values.</p>
							</li>
							<li>
								<p><span class="keyword">game.rotation.prototype</span></p>
								<div class="example">
									<p>s = vector3.new({x = 1}) <span class="comment">--x axis</span></p>
									<p>f = vector3.new({y = 1}) <span class="comment">--forwards/y axis</span></p>
									<p>u = vector3.new({z = 1})  <span class="comment">--up/z axis</span></p>
									<p>function getRot(self) <span class="comment">--returns vector3.new({z = yaw, x = pitch, y = roll})</span></p>
									<p>function rotX(self, angle) <span class="comment">--rotate around x axis, angle in degrees</span></p>
									<p>function rotY(self, angle) <span class="comment">--rotate around y axis, angle in degrees</span></p>
									<p>function rotZ(self, angle) <span class="comment">--rotate around z axis, angle in degrees</span></p>
									<p>function rotate(self, rotVec3) <span class="comment">--rotate around all axis, zxy order, angle in degrees</span></p>
								</div>
							</li>
						</ul>
					</li>
					<li>
						<p><span class="keyword">game.pos</span></p>
						<ul>
							<li>
								<p><span class="keyword">game.pos.new([obj])</span> - constructor. obj can be used to specify initial values.</p>
							</li>
							<li>
								<p><span class="keyword">game.pos.prototype</span></p>
								<div class="example">
									<p>o = vector3.new() <span class="comment">--position in the world</span></p>
									<p>rot = game.rotation.new() <span class="comment">--rotation, or heading of the pos if you like</span></p>
									
									<p style="padding-left: 90px;">&nbsp;</p>
									<p><span class="comment">--see game.rotation.prototype for these</span></p>
									<p>function getRot(self)</p>
									<p>function rotX(self, angle)</p>
									<p>function rotY(self, angle)</p>
									<p>function rotZ(self, angle)</p>
									<p>function rotate(self, rotVec3)</p>
								</div>
							</li>
						</ul>
					</li>
				</ul>

				<p style="padding-left: 30px;">Example:</p>
				<div class="example">
					<p>local pos0 = game.preg[0]</p>
					<p>local newRot = game.rotation.new(pos0.rot)</p>
					<p>local newPos = game.pos.new({rot = newRot})</p>
					<p>newPos:rotX(45)</p>
					<p>newPos:rotate({x = 90, z = 180})</p>
				</div>
			</div>
		</div>


		<div class="content_block">
			<div class="content_block_caption">Presentations</div>
			<div>
				<p>You can add presentations using <span class="keyword">game.addPrsnt(tablePrsnt)</span></p>
				<p>tablePrsnt must have the following format</p>
				<div class="example">
					<p>tablePrsnt = {</p>
						<p class="tab">id = strID,</p>
						<p class="tab">[flags] = {intFlag1, ...},</p>
						<p class="tab">[mesh] = intMesh,</p>
						<p class="tab">triggers = {[numTriggerConst] = func, ...}</p>
					<p>}</p>
				</div>
				<p><span class="keyword">[flags]</span> can be omited and defaults to no flags at all. If you copied header_presentation.py to your msfiles folder, you can use the flags defined there.</p>
				<p><span class="keyword">[mesh]</span> can be omited and defaults to 0. If you copied ID_meshes.py to your msfiles folder, you can use the mesh nos defined there.</p>
				<p><span class="keyword">triggers</span> must have at least one element, the key being a number and the value being a function. If you copied header_triggers.py to your msfiles folder, you can use the trigger values defined there.</p>
				<p>Basic example:</p>
				<div class="example">
					<p class="comment">--copy header_presentations.py, header_triggers.py and ID_meshes.py to your msfiles folder for this example.</p>
					<p>local index = game.addPrsnt({</p>
					<p class="tab">id = "myPrsnt",</p>
					<p class="tab">flags = {game.const.prsntf_read_only, game.const.prsntf_manual_end_only},</p>
					<p class="tab comment">--you can initialize an array like this, without keys - they don't matter here anyway.</p>
					<p class="tab">mesh = game.const.mesh_cb_ui_main,</p>
					<p class="tab">triggers = {</p>
						<p class="tab2">[game.const.ti_on_presentation_load] = function ()</p>
							<p class="tab2 comment">--The const inside the [] declares a number key, similar to keyName = 123 for string keys.</p>
							<p class="tab3">game.presentation_set_duration(9999999)</p>
							<p class="tab3">local overlay = game.create_mesh_overlay(0, game.const.mesh_mp_ingame_menu)</p>
							<p>&nbsp;</p>
							<p class="tab3">local position = game.pos.new()</p>
							<p class="tab3">position.o.x = 0.3</p>
							<p class="tab3">position.o.y = 0.3</p>
							<p class="tab3">game.overlay_set_position(overlay, position)</p>
							<p>&nbsp;</p>
							<p class="tab3">position.o.x = 0.5</p>
							<p class="tab3">position.o.y = 0.8</p>
							<p class="tab3">game.overlay_set_size(overlay, position)</p>
						<p class="tab2">end
					<p class="tab">}</p>
					<p>})</p>
					<p>game.start_presentation(index)</p>
				</div>
			</div>
		</div>


		<div class="content_block">
			<div class="content_block_caption">Other functions:</div>
			<div>
				<ul>
					<li>
						<div>
							<p style="padding-left: 20px;">game.getScriptNo(script_name), use in conjunction with game.call_script(scriptNo, ...)</p>
							<p style="padding-left: 30px;">Example:</p>
							<div class="example">
								<p>local no = game.getScriptNo("game_start")</p>
								<p>game.call_script(no)</p>
							</div>
						</div>
					</li>
					<li>
						<div>
							<p style="padding-left: 20px;">game.getCurTemplateId(), returns the id/name of the current mission template. Note that no template will be loaded at the time main.lua is executed.</p>
						</div>
					</li>
				</ul>
				<p>&nbsp;</p>
				<p style="padding-left: 10px">Other WSE LUA API functions - these could be useful for advanced users, but you should get along fine without ever using them.</p>
				<ul>
					<li style="padding-left: 20px;"><p><span class="keyword">game.execOperation(strOperationName, arg1, arg2, ....)</span> - see operations</p></li>
					<li style="padding-left: 20px;"><p><span class="keyword">game.getReg(intTypeId, intIndex)</span> typeIds are: 0 = int, 1 = str, 2 = pos</p></li>
					<li style="padding-left: 20px;"><p><span class="keyword">game.setReg(intTypeId, intIndex, val)</span></p></li>
				</ul>
			</div>
		</div>
	</div>


	<h2><div id="miscellaneous_button" class="button_hide" onclick="toggleHide('miscellaneous')">&nbsp;</div><span style="color: #003366;">MISCELLANEOUS<br /></span></h2>
	<hr />
	<div id="miscellaneous_content">
		<div class="content_block">
			<div class="content_block_caption">Globals</div>
			<div>
				<ul>
					<li style="padding-left: 20px;"><span class="keyword">tableShallowCopy(t, copyMetatable)</span> - returns a copy of table t, however any object items will still reference the same object. If copyMetatable ~= nil, the returned table will have the same metatable as t, as given by getmetatable(t).</li>
					<li style="padding-left: 20px; padding-top: 10px;"><span class="keyword">tableRecursiveCopy(t, copyMetatable)</span> - returns a copy of table t. All table items in t and further down the "tree" will be actual copies by value instead of by reference. If copyMetatable ~= nil, all metatables will be copied (by value), as given by getmetatable(t).</li>
					<li style="padding-left: 20px; padding-top: 10px;">vector3 - class for storing and manipulating 3D vectors
						<ul>
							<li>
								<p style="padding-left: 20px; padding-top: 10px;"><span class="keyword">vector3.prototype</span></p>
								<div class="example">
									<p>x = 0</p>
									<p>y = 0</p>
									<p>z = 0</p>
									<p>function len(self) <span class="comment">--returns the length of the vector</span></p>
								</div>
							</li>
							<li>
								<p style="padding-left: 20px; padding-top: 10px;"><span class="keyword">vector3.new([obj])</span> - constructor. obj; can be used to specify initial values.</p>
							</li>
							<li>
								<p style="padding-left: 20px; padding-top: 10px;"><span class="keyword">vector3 operators</span> + - * ==</p>
							</li>
							<li>
							<p style="padding-left: 20px;">Example:</p>
								<div class="example">
									<p>local vecA = vector3.new({x = 60, y = 30})</p>
									<p>local vecB = vector3.new()</p>
									<p>&nbsp;</p>
									<p>game.display_message(tostring(vecA:len())) <span class="comment">--67.08...</span></p>
									<p>&nbsp;</p>
									<p>if vecA == vecB then</p>
									<p class="tab"><span class="comment">--will not happen</span></p>
									<p>end</p>
									<p>&nbsp;</p>
									<p>vecA = vecA * vecB --{60*0, 30*0, 0*0}</p>
									<p>if vecA == vecB then</p>
									<p class="tab"><span class="comment">--will happen</span></p>
									<p>end</p>
								</div>
							</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>

		<div class="content_block">
			<div class="content_block_caption">Sandbox</div>
			<div>
				<p>Changes include:</p>
				<ul>
					<li>
						<p>Disabled package.loadlib, package.cpath, io.popen. os.execute, os.getenv, os.tmpname, ffi library, loading bytecode (can be exploited)</p>
					</li>
					<li>
						<p>Restrict dofile, loadfile and all IO operations to the lua directory</p>
					</li>
				</ul>
			</div>
		</div>
	</div>

	<script>	
		var contentCaptions = document.getElementsByClassName("content_block_caption");
		for(var i = 0; i < contentCaptions.length; i++){
			var elemCount = 0;
			for(var j = 0; j < contentCaptions[i].parentNode.childNodes.length; j++){
				if(contentCaptions[i].parentNode.childNodes[j].nodeType == 1){
					elemCount++;
					if(elemCount == 2){
						contentCaptions[i].parentNode.childNodes[j].id = "content_block_" + i + "_content";
					}
				}
			}

			var caption = contentCaptions[i].innerHTML;
			contentCaptions[i].innerHTML = "<div id='content_block_" + i + "_button'" 
				+ " class='button_hide button_hide_small' onclick='toggleHide(" + '"content_block_' + i + '")'
				+ "'>&nbsp;</div>" 
				+ caption;
		}

		var hideBtns = document.getElementsByClassName("button_hide");
		for(var i = 0; i < hideBtns.length; i++){
			hideBtns[i].innerHTML = "</div><div class='button_hide_inner button_hide_plus'></div><div class='button_hide_inner button_hide_minus'>";
		}
	</script>
</body>